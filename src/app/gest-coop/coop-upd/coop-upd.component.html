<div *ngIf="cooperative" class="grid p-fluid">
    <div class="col-12">
        <!-- ℹ️ FORM -->
        <div class="card">
            <form [formGroup]="updCoopForm">
                <div class="grid formgrid mb-2">
                    <div class="col-12 mb-2">
                        <span class="p-float-label mb-3">
                            <input pInputText type="text" 
                               id="name" formControlName="name"
                            >
                            <label for="name">Nom de la Coopérative</label>
                        </span>
                        <p 
                            class="text-red-500"
                            *ngIf="formControls['name'].errors?.['minlength']" 
                        >
                            Le nom doit avoir au moins {{ formControls['name'].errors?.['minlength'].requiredLength }} caractères
                        </p>
                        <p 
                            class="text-red-500"
                            *ngIf="formControls['name'].touched && formControls['name'].errors?.['required']" 
                        >
                            Ce champ est requis
                        </p>
                    </div>
                </div>
                <div class="grid formgrid mb-2">
                    <div class="col-12 mb-2">
                        <span class="p-float-label mb-3">
                            <p-dropdown 
                                id="coop_typeId" formControlName="coop_typeId"
                                [options]="coopTypes" optionLabel="label" optionValue="id"
                                [showClear]="false"
                            >
                            </p-dropdown>
                            <label for="coop_typeId">Choisissez un type de coopérative</label>
                        </span>
                        <p 
                        class="text-red-500"
                        *ngIf="formControls['coop_typeId'].touched && formControls['coop_typeId'].errors?.['required']" 
                        >
                          Ce champ est requis
                        </p>
                    </div>
                </div>
                <div class="grid formgrid mb-2">
                    <div class="col-12 mb-2">
                        <span class="p-float-label mb-3">
                            <textarea pInputTextarea type="text" 
                                id="description" formControlName="description"
                            ></textarea>
                            <label for="description">Description</label>
                        </span>
                    </div>
                </div>
                <div class="grid formgrid mb-2">
                    <div class="col-4 mb-2">
                        <span class="p-float-label mb-3">
                            <input pInputText type="text"
                                id="addr_postal_code" formControlName="addr_postal_code"
                                [ngClass]="updCoopForm.errors?.['NominatimValidator'] ? 'ng-invalid ng-dirty' : ''"
                            >
                            <label for="addr_postal_code">Code Postal</label>
                        </span>
                        <p 
                            class="text-red-500"
                            *ngIf="formControls['addr_postal_code'].errors?.['pattern']" 
                        >
                            Un code postal est composé de 4 chiffres uniquement.
                        </p>
                        <p 
                            class="text-red-500"
                            *ngIf="formControls['addr_postal_code'].touched && formControls['addr_postal_code'].errors?.['required']" 
                        >
                            Ce champ est requis
                        </p>
                    </div>
                    <div class="col mb-2">
                        <span class="p-float-label mb-3">
                            <input pInputText type="text"
                                id="addr_city" formControlName="addr_city"
                                [ngClass]="updCoopForm.errors?.['NominatimValidator'] ? 'ng-invalid ng-dirty' : ''"
                            >
                            <label for="addr_city">Ville / Village</label>
                        </span>
                        <p 
                            class="text-red-500"
                            *ngIf="formControls['addr_city'].touched && formControls['addr_city'].errors?.['required']" 
                        >
                            Ce champ est requis
                        </p>
                    </div>
                </div>
                <div class="grid formgrid mb-2">
                    <div class="col-10 mb-2">
                        <span class="p-float-label mb-3">
                            <input pInputText type="text"
                                id="addr_street_name" formControlName="addr_street_name"
                                [ngClass]="updCoopForm.errors?.['NominatimValidator'] ? 'ng-invalid ng-dirty' : ''"
                            >
                            <label for="addr_street_name">Nom de Rue</label>
                        </span>
                    </div>
                    <div class="col mb-2">
                        <span class="p-float-label mb-3">
                            <input pInputText type="text" 
                                id="addr_street_nb" formControlName="addr_street_nb"
                                [ngClass]="updCoopForm.errors?.['NominatimValidator'] ? 'ng-invalid ng-dirty' : ''"
                            >
                            <label for="addr_street_nb">N° de Rue</label>
                        </span>
                        <br />
                    </div>
                    <div *ngIf="updCoopForm.errors?.['NominatimValidator']" class="col-12 mb-2">
                        <p 
                            class="text-red-500"
                            style="text-align: center;"
                        >
                            {{ updCoopForm.errors?.['NominatimValidator'] }}
                        </p>
                    </div>
                </div>

                <div class="grid formgrid">
                    <div class="col-12 mb-2">
                        <span class="p-float-label mb-3">
                            <input pInputText type="text"
                                id="logo" 
                                formControlName="logo"
                            >
                            <label for="logo">Logo (lien vers image)</label>
                        </span>
                    </div>
                </div>
            </form>
        </div>

        <!-- ℹ️ FOOTER -->
        <div class="gc-popup-footer">
            <div class="grid ml-0 mr-0">
                <div class="col-6 mb-2">
                    <button pButton pRipple 
                    [disabled]="!updCoopForm.valid"
                    label="Enregistrer"
                    icon="pi pi-save"
                    type="button" 
                    class="p-button-outlined p-button-success mr-2 mb-2"
                    (click)="saveModifications()"
                    ></button>
                </div>
                <div class="col-6 mb-2">
                    <button pButton pRipple 
                        label="Annuler"
                        icon="pi pi-times-circle"
                        type="button" 
                        class="p-button-outlined p-button-danger mr-2 mb-2" 
                        (click)="cancelModifications()"
                    ></button>
                </div>
            </div>
        </div>
    </div>
</div>
